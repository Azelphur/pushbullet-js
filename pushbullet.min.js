var PushBullet=function(){var e={},t="https://api.pushbullet.com/v2/",n=t+"pushes",r=t+"contacts",a=t+"devices",o=t+"users/me",i=t+"upload-request",u=4,d=200,p=204;e.APIKey=null,e.push=function(e,t,r,a,o){var i=new FormData;if(i.append(e.toLowerCase()),r&&t){var u=new Error("Cannot push to both device and contact");if(o)return o(u);throw u}if(r)i.append("email",r);else{if(!t){var u=new Error("Must push to either device or contact");if(o)return o(u);throw u}i.append("device_iden",t)}switch(e.toLowerCase()){case"note":i.append("title",a.title),i.append("body",a.body);break;case"link":i.append("title",a.title),i.append("url",a.url),a.body&&paramaters.append("body",a.body);break;case"address":i.append("name",a.name),i.append("address",a.address);break;case"list":i.append("title",a.title),i.append("items",a.items);break;default:var u=new Error("Invalid type");if(o)return o(u);throw u}var d=l(n,"POST",i,o);return o?void 0:d},e.pushFile=function(e,t,n,r,a){var o="file_type="+encodeURIComponent(n.type),u="file_name="+encodeURIComponent(n.name),d=i+"?"+o+"&"+u,p=a?function(o,i){if(o)return a(o);try{s(i,e,t,n,r,a)}catch(o){return a(o)}}:null,c=l(d,"GET",null,p);return a?void 0:s(c,n)};var s=function(e,t,r,a,o,i){var u=new FormData;u.append("awsaccesskeyid",e.data.awsaccesskeyid),u.append("acl",e.data.acl),u.append("key",e.data.key),u.append("signature",e.data.signature),u.append("policy",e.data.policy),u.append("content_type",e.data.content_type),u.append("file",a),l(e.upload_url,"POST",u,null);var d=new FormData;if(d.append("file_name",a.name),d.append("file_type",a.type),d.append("file_url",e.file_url),d.append("type","file"),r&&t){var p=new Error("Cannot push to both device and contact");if(i)return i(p);throw p}if(r)d.append("email",r);else{if(!t){var p=new Error("Must push to either device or contact");if(i)return i(p);throw p}d.append("device_iden",t)}var s=l(n,"POST",d,i);return i?void 0:s};e.deletePush=function(e,t){var r=l(n+"/"+e,"DELETE",null,t);return t?void 0:r},e.pushHistory=function(e){var t=l(n,"GET",null,e);return e?void 0:t},e.devices=function(e){var t=l(a,"GET",null,e);return e?void 0:t},e.deleteDevice=function(e,t){var n=l(a+"/"+e,"DELETE",null,t);return t?void 0:n},e.contacts=function(e){var t=l(r,"GET",null,e);return e?void 0:t},e.deleteContact=function(e,t){var n=l(r+"/"+e,null,t);return t?void 0:n},e.user=function(e){var t=l(o,"GET",null,e);return e?void 0:t};var l=function(t,n,r,a){if(!e.APIKey){var o=new Error("API Key for Pushbullet not set");if(a)return a(o);throw o}var i=new XMLHttpRequest,d=!1;return a&&(d=!0,i.onreadystatechange=function(){if(i.readyState===u){var e=null;try{e=c(i)}catch(t){return a(t)}return a(null,e)}}),i.open(n,t,d),i.setRequestHeader("Authorization","Basic "+window.btoa(e.APIKey+":")),i.send(r),d?void 0:c(i)},c=function(e){if(e.status!==d&&e.status!==p)throw new Error(e.status);try{return JSON.parse(e.response)}catch(t){return e.response}};return e}();
